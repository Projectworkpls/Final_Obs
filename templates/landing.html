{% extends "base.html" %}

{% block title %}Sanjaya â€“ The Observer{% endblock %}

{% block content %}
<style>
    @import url('https://fonts.googleapis.com/css2?family=Avenir+Next+Arabic:wght@300;400;500;600;700;800&family=Archivo+Black&display=swap');

    /* --- 1. Root Variables & General Styles --- */
    :root {
        --navy: #1D3654;
        --teal: #29867F;
        --gold: #D8AF53;
        --light-bg: #f8fafc;
        --light-bg-alt: #f1f2f2;
        --text-dark: #1e293b;
        --text-muted: #475569;
        --white: #ffffff;
        --border-color: #e2e8f0;
        --pdf-grey-beige: #C2C6C9;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Avenir Next Arabic', sans-serif;
        line-height: 1.6;
        color: var(--navy);
        overflow-x: hidden;
        background-color: var(--light-bg);
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2329867F' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        padding-top: 75px; 
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: 'Archivo Black', sans-serif;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
        position: relative;
        z-index: 2;
    }

    .section {
        padding: 5rem 0;
        position: relative;
        overflow: hidden;
    }
    
    .section-title {
        font-size: clamp(2rem, 5vw, 3rem);
        text-align: center;
        margin-bottom: 1rem;
        background: linear-gradient(135deg, var(--navy) 0%, #334155 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-subtitle {
        text-align: center;
        color: var(--text-muted);
        font-size: 1.2rem;
        max-width: 600px;
        margin: 0 auto 4rem auto;
        line-height: 1.6;
    }

    /* --- 2. Hero Section --- */
    .hero-section {
        padding: 3rem 0;
        min-height: 50vh;
        background: linear-gradient(135deg, var(--navy) 0%, var(--teal) 100%);
        color: var(--white);
        display: flex;
        align-items: center;
        text-align: center;
        position: relative; /* Needed for canvas positioning */
    }
    
    .hero-content {
        width: 100%;
    }

    .hero-title {
        font-size: clamp(2.5rem, 6vw, 4.5rem);
        line-height: 1.1;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        margin-bottom: 0.5rem;
    }
    
    .dynamic-subtitle {
        display: inline-block;
        font-size: clamp(1.5rem, 4vw, 2.5rem);
        font-family: 'Avenir Next Arabic', sans-serif;
        font-weight: 400;
        color: var(--gold);
        position: relative;
        min-height: 45px;
        margin-bottom: 1.5rem;
    }
    
    .dynamic-subtitle::after {
        content: '|';
        font-weight: 300;
        color: var(--gold);
        animation: blink 1s infinite;
        margin-left: 8px;
    }

    @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
    }

    .hero-subtitle {
        font-size: clamp(1.1rem, 2.5vw, 1.5rem);
        font-weight: 400;
        max-width: 600px;
        margin: 0 auto 2.5rem auto;
        color: rgba(255, 255, 255, 0.95);
    }

    .badges-row {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1.5rem;
    }

    .badge {
        display: flex;
        align-items: center;
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(5px);
        color: var(--white);
        font-weight: 500;
        padding: 0.75rem 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

     .badge:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .badge .badge-icon {
        font-size: 1.2rem;
        margin-right: 0.75rem;
        width: 24px;
        text-align: center;
    }
    
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .badge {
        opacity: 0; 
        animation: fadeInUp 0.5s ease-out forwards;
    }
    .badge:nth-child(1) { animation-delay: 0.2s; }
    .badge:nth-child(2) { animation-delay: 0.4s; }
    .badge:nth-child(3) { animation-delay: 0.6s; }
    
    /* --- Interactive Canvas Background --- */
    #hero-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }
    .hero-section .container {
        position: relative;
        z-index: 2;
    }

    /* --- 3. Profile (Founder) Section --- */
    .profile-section .container {
        max-width: 1100px;
        background: linear-gradient(135deg, var(--light-bg) 0%, var(--light-bg-alt) 100%);
        padding: 3rem 4rem;
        border-radius: 24px;
        box-shadow: 0 15px 40px rgba(41, 134, 127, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .profile-container {
        display: flex;
        align-items: center;
        gap: 3rem;
    }
    
    .profile-image-container {
        flex: 0 0 200px;
        text-align: center;
    }
    
    .profile-image {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        object-fit: cover;
        object-position: top;
        border: 4px solid var(--white);
        box-shadow: 0 10px 30px rgba(41, 134, 127, 0.2);
        margin-bottom: 1rem;
    }
    
    .profile-name { font-size: 1.3rem; font-weight: 700; color: var(--navy); }
    .profile-info { flex: 1; }
    .profile-info-title {
        font-size: clamp(1.8rem, 4vw, 2.2rem);
        margin-bottom: 1rem;
        background: linear-gradient(135deg, var(--navy) 0%, var(--teal) 100%);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
    }
    .profile-description { font-size: 1.1rem; color: #334155; margin-bottom: 1.5rem; }
    .profile-highlight {
        border-left: 4px solid var(--gold);
        padding: 1.5rem;
        border-radius: 8px;
        font-style: italic;
        color: var(--text-dark);
        background: var(--white);
        box-shadow: 0 4px 20px rgba(216, 175, 83, 0.1);
    }

    /* --- 4. Features Section --- */
    .feature-grid { display: flex; flex-direction: column; align-items: center; gap: 2rem; }
    .feature-grid-row { display: grid; gap: 2rem; width: 100%; }
    .feature-grid-row.top-row { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
    .feature-grid-row.bottom-row { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); max-width: calc(66.66% + 1rem); }
    .feature-card {
        background: var(--white); border-radius: 16px; padding: 2.5rem;
        box-shadow: 0 8px 30px rgba(41, 134, 127, 0.08); border: 1px solid var(--border-color);
        text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .feature-icon { font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--teal); }
    .feature-title { font-size: 1.3rem; color: var(--navy); margin-bottom: 0.75rem; }
    .feature-description { color: var(--text-muted); }
    
    /* --- 5. How It Works Section --- */
    .how-it-works-section .container {
        max-width: 1100px; background-color: var(--white); padding: 3rem 4rem;
        border-radius: 24px; box-shadow: 0 15px 40px rgba(41, 134, 127, 0.08);
    }
    .how-it-works-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem 4rem; }
    .step-card {
        background: linear-gradient(135deg, var(--navy) 0%, var(--teal) 100%);
        color: var(--white); padding: 1.5rem 1rem; border-radius: 12px; text-align: center;
        position: relative; box-shadow: 0 5px 15px rgba(29, 54, 84, 0.15);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .step-card:not(:nth-child(3n))::after {
        content: ''; position: absolute; left: 100%; top: 50%; transform: translateY(-50%);
        width: 4rem; height: 2px;
        background: repeating-linear-gradient(to right, var(--pdf-grey-beige) 0, var(--pdf-grey-beige) 4px, transparent 4px, transparent 8px);
    }
    .step-number {
        display: flex; align-items: center; justify-content: center;
        margin: 0 auto 0.75rem auto; width: 30px; height: 30px;
        border: 2px solid var(--white); color: var(--white); border-radius: 50%;
        font-weight: 700; font-size: 1rem;
    }
    .step-description { font-size: 1rem; font-weight: 500; line-height: 1.4; }

    /* --- 6. Testimonials Section --- */
    .testimonials-section .container {
        max-width: 1100px; background: linear-gradient(135deg, var(--light-bg) 40%, var(--light-bg-alt) 100%);
        padding: 3rem 4rem; border-radius: 24px; box-shadow: 0 15px 40px rgba(41, 134, 127, 0.08);
    }
    .testimonials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
    .testimonial-card {
        background: var(--white); border-radius: 16px; padding: 2rem;
        box-shadow: 0 6px 24px rgba(29, 54, 84, 0.08); display: flex; flex-direction: column;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .testimonial-quote { color: var(--text-dark); font-style: italic; margin-bottom: 1.5rem; flex-grow: 1; }
    .testimonial-author { font-weight: 700; color: var(--teal); }
    .testimonial-role { color: var(--text-muted); font-size: 0.9rem; }
    
    /* --- 7. Quote Section --- */
    .quote-section { text-align: center; }
    .quote-text {
        font-size: clamp(1.5rem, 4vw, 2.2rem); font-weight: 300; font-style: italic;
        line-height: 1.4; max-width: 800px; margin: 0 auto; color: var(--navy); position: relative;
    }
    .quote-text::before, .quote-text::after {
        content: '"'; font-size: 6rem; color: var(--teal); position: absolute;
        font-family: serif; opacity: 0.2;
    }
    .quote-text::before { top: -2rem; left: -2rem; }
    .quote-text::after { bottom: -4rem; right: -2rem; }

    /* --- 8. Trust Section --- */
    .trust-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
    .trust-item {
        background: var(--white); border-radius: 16px; padding: 2.5rem;
        box-shadow: 0 8px 30px rgba(41, 134, 127, 0.08); border: 1px solid var(--border-color);
        transition: transform 0.3s ease, box-shadow 0.3s ease; text-align: center;
    }
    .trust-item:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(41, 134, 127, 0.15); }
    .trust-icon { font-size: 2.5rem; margin-bottom: 1.5rem; color: var(--teal); }
    .trust-title { font-size: 1.3rem; color: var(--navy); margin-bottom: 0.75rem; }
    .trust-desc { color: var(--text-muted); }

    /* Hover rule for other cards */
    .profile-section .container:hover, .feature-card:hover, .step-card:hover, .testimonial-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(41, 134, 127, 0.15);
    }
    
    /* --- 9. Responsive Design --- */
    @media (max-width: 992px) {
        .feature-grid-row.bottom-row { max-width: 100%; }
        .how-it-works-grid { grid-template-columns: repeat(2, 1fr); gap: 3rem 2rem; }
        .step-card:not(:nth-child(3n))::after { content: none; }
        .step-card:not(:nth-child(2n))::after {
            content: ''; position: absolute; left: 100%; top: 50%; transform: translateY(-50%);
            width: 2rem; height: 2px;
            background: repeating-linear-gradient(to right, var(--pdf-grey-beige) 0, var(--pdf-grey-beige) 4px, transparent 4px, transparent 8px);
        }
    }

    @media (max-width: 768px) {
        .section { padding: 3rem 0; }
        .profile-section .container, .how-it-works-section .container, .testimonials-section .container { padding: 2rem; }
        .profile-container { flex-direction: column; text-align: center; gap: 2rem; }
        .badges-row { flex-direction: column; align-items: center; }
        .quote-text::before, .quote-text::after { display: none; }
        .how-it-works-grid { grid-template-columns: 1fr; }
        .step-card::after { content: none !important; }
    }
</style>


<section class="hero-section">
    <canvas id="hero-canvas"></canvas>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Sanjaya â€“ The Observer</h1>
            <span class="dynamic-subtitle"></span>
            <p class="hero-subtitle">Every child needs someone who truly listens.</p>
            <div class="badges-row">
                <div class="badge">
                    <span class="badge-icon"><i class="fa-solid fa-users"></i></span> Trusted by 100+ Parents
                </div>
                <div class="badge">
                    <span class="badge-icon"><i class="fa-solid fa-school"></i></span> Endorsed by Principals
                </div>
                <div class="badge">
                    <span class="badge-icon"><i class="fa-solid fa-lock"></i></span> 100% Private & Secure
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section profile-section">
    <div class="container">
        <div class="profile-container">
            <div class="profile-image-container">
                <img src="{{ url_for('static', filename='images/punam-jaiswal.jpg') }}" alt="Punam Jaiswal" class="profile-image">
                <div class="profile-name">Punam Jaiswal</div>
            </div>
            <div class="profile-info">
                <h2 class="profile-info-title">Meet Our Founder</h2>
                <p class="profile-description">
                    With years of experience in child psychology and education, Punam Ma'am, as Principal, brings a unique blend of empathy and expertise to every interaction. Her gentle approach and profound understanding of children's needs make her the ideal guide for your child's educational journey.
                </p>
                <div class="profile-highlight">
                    "Every child has a story to tell. My role is simply to listen, understand, and help parents see the beautiful complexity of their child's world."
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2 class="section-title">FEATURES</h2>
        <div class="feature-grid">
            <div class="feature-grid-row top-row">
                <div class="feature-card">
                   <div class="feature-icon"><i class="fa-solid fa-hand-holding-heart"></i></div>
                    <h3 class="feature-title">MATCHED WITH A CARING OBSERVER</h3>
                    <p class="feature-description">Every child is thoughtfully paired with a warm, understanding observer who patiently listens.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-regular fa-clock"></i></div>
                    <h3 class="feature-title">A DAILY 5 MINUTE SHARING TIME</h3>
                    <p class="feature-description">Just five minutes a day to share stories, daily activities, dreams, or simply feelings.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-star"></i></div>
                    <h3 class="feature-title">ENCOURAGEMENT & GUIDANCE</h3>
                    <p class="feature-description">Observers listen with care, celebrate little wins, and note progress that matters.</p>
                </div>
            </div>
            <div class="feature-grid-row bottom-row">
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-arrow-trend-up"></i></div>
                    <h3 class="feature-title">GROWTH UPDATES FOR PARENTS</h3>
                    <p class="feature-description">Parents receive simple, easy-to-read reports highlighting their child's progress.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon"><i class="fa-solid fa-seedling"></i></div>
                    <h3 class="feature-title">JOURNEY TO CONFIDENCE</h3>
                    <p class="feature-description">With time, children blossom â€“ becoming more expressive, confident, and joyful.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section how-it-works-section">
    <div class="container">
        <h2 class="section-title">HOW IT WORKS</h2>
        <div class="how-it-works-grid">
            <div class="step-card"><div class="step-number">1</div><p class="step-description">Principals Nominate & Train Observers</p></div>
            <div class="step-card"><div class="step-number">2</div><p class="step-description">Observer Calls Child & Listens</p></div>
            <div class="step-card"><div class="step-number">3</div><p class="step-description">Child Speaks Freely</p></div>
            <div class="step-card"><div class="step-number">4</div><p class="step-description">Data Goes To AI System</p></div>
            <div class="step-card"><div class="step-number">5</div><p class="step-description">AI Captures Cues</p></div>
            <div class="step-card"><div class="step-number">6</div><p class="step-description">AI Highlights Trends & Patterns</p></div>
            <div class="step-card"><div class="step-number">7</div><p class="step-description">Principal Reviews Performance</p></div>
            <div class="step-card"><div class="step-number">8</div><p class="step-description">Principal Guides Parents</p></div>
            <div class="step-card"><div class="step-number">9</div><p class="step-description">The child develops soft skills.</p></div>
        </div>
    </div>
</section>

<section class="section testimonials-section">
    <div class="container">
        <h2 class="section-title">Hear From Our Community</h2>
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p class="testimonial-quote">"I am very happy with this programme as I can see a remarkable change in my child. She was an introvert but now she is opening up and is more confident. In fact, she has made me a good listener. I extend my full support to this programme."</p>
                <div><div class="testimonial-author">Mr. Shah</div><div class="testimonial-role">Parent</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"It is a very innovative programme and need of the hour. Things which the children are reluctant to share with their parents, they share with ma'am because they have a patient listener. Both my children have opened up and are more confident."</p>
                <div><div class="testimonial-author">Mr. Dey</div><div class="testimonial-role">Parent</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"I can see a vast difference for better in my daughter. She has become very regular in her work. She is very excited to share her dayâ€™s activities. I can see happiness on her face while talking to ma'am."</p>
                <div><div class="testimonial-author">Mrs. Paliwal</div><div class="testimonial-role">Parent</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"After going through the growth reports I have realized that my childâ€™s study habits and social interactions are very positive. The reports are helping me to guide him in the right direction. I am very satisfied with the programme."</p>
                <div><div class="testimonial-author">Mrs. Dsouza</div><div class="testimonial-role">Parent</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"This platform allows me to share my views and ideas freely. It helps me express positive thoughts and open up about negative ones, helping me rectify errors in social and academic life."</p>
                <div><div class="testimonial-author">Daivik</div><div class="testimonial-role">Student, 16 years</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"I am happy because I get a chance to talk, share, narrate stories and recite poems daily."</p>
                <div><div class="testimonial-author">Ovi</div><div class="testimonial-role">Student, 6 years</div></div>
            </div>
            <div class="testimonial-card">
                <p class="testimonial-quote">"This programme has allowed me to say whatever I want without being objected. I can relieve myself of the things I want to say."</p>
                <div><div class="testimonial-author">Arnav</div><div class="testimonial-role">Student, 12 years</div></div>
            </div>
        </div>
    </div>
</section>

<section class="section quote-section">
    <div class="container">
        <p class="quote-text">
            No advice. No analysis. Just awareness.<br>
            When someone truly listens, clarity follows. And children flourish.
        </p>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2 class="section-title">Why Parents Trust Sanjaya</h2>
        <div class="trust-grid">
            <div class="trust-item">
                <div class="trust-icon"><i class="fa-solid fa-user-tie"></i></div>
                <h4 class="trust-title">Expert Guidance</h4>
                <p class="trust-desc">Supervised by legendary educators</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon"><i class="fa-solid fa-lock"></i></div>
                <h4 class="trust-title">Complete Privacy</h4>
                <p class="trust-desc">No recordings, no digital traces</p>
            </div>
            <div class="trust-item">
                <div class="trust-icon"><i class="fa-solid fa-clipboard-check"></i></div>
                <h4 class="trust-title">Daily Insights</h4>
                <p class="trust-desc">Confidential reports delivered daily</p>
            </div>
        </div>
    </div>
</section>

<div id="chatbot-icon"></div>
<div id="chatbot-container">
    <div id="chatbot-header">
        <h3>Sanjaya Assistant</h3>
        <div id="chatbot-controls">
            <button id="chatbot-minimize-btn" title="Minimize">âˆ’</button>
            <button id="chatbot-close-btn" title="Close">Ã—</button>
        </div>
    </div>
    <div id="chatbot-body"></div>
    <div id="chatbot-input-container">
        <textarea id="chatbot-input" placeholder="Ask me anything about Sanjaya..." rows="1"></textarea>
        <button id="chatbot-send-btn">Send</button>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/chatbot.css') }}">
<script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- Typing Effect Script ---
    const typingElement = document.querySelector('.dynamic-subtitle');
    const wordsToType = ["A Listener", "A Guide", "A Friend", "A Mentor"];
    const typingSpeed = 150; 
    const deletingSpeed = 100;
    const delayBetweenWords = 2000;

    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;

    function typeEffect() {
        const currentWord = wordsToType[wordIndex];
        let displayText = isDeleting ? currentWord.substring(0, charIndex - 1) : currentWord.substring(0, charIndex + 1);
        typingElement.textContent = displayText;

        if (isDeleting) charIndex--; else charIndex++;

        let speed = isDeleting ? deletingSpeed : typingSpeed;

        if (!isDeleting && charIndex === currentWord.length) {
            speed = delayBetweenWords;
            isDeleting = true;
        } else if (isDeleting && charIndex === 0) {
            isDeleting = false;
            wordIndex = (wordIndex + 1) % wordsToType.length;
        }
        
        setTimeout(typeEffect, speed);
    }
    typeEffect();
});
</script>

<script>
    // --- Interactive Constellation Background Script ---
    const canvas = document.getElementById('hero-canvas');
    const ctx = canvas.getContext('2d');
    const heroSection = document.querySelector('.hero-section');

    let particlesArray;

    function init() {
        canvas.width = heroSection.offsetWidth;
        canvas.height = heroSection.offsetHeight;
        
        particlesArray = [];
        let numberOfParticles = (canvas.height * canvas.width) / 9000;
        for (let i = 0; i < numberOfParticles; i++) {
            let size = (Math.random() * 2) + 1;
            let x = Math.random() * (innerWidth - size * 2) + size * 2;
            let y = Math.random() * (innerHeight - size * 2) + size * 2;
            let directionX = (Math.random() * 0.5) - 0.25;
            let directionY = (Math.random() * 0.5) - 0.25;
            let color = 'rgba(216, 175, 83, 0.4)';

            particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
        }
    }

    class Particle {
        constructor(x, y, directionX, directionY, size, color) {
            this.x = x; this.y = y; this.directionX = directionX;
            this.directionY = directionY; this.size = size; this.color = color;
        }
        draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
            ctx.fillStyle = 'rgba(216, 175, 83, 0.4)';
            ctx.fill();
        }
        update() {
            if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
            if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
            this.x += this.directionX;
            this.y += this.directionY;
            this.draw();
        }
    }

    function connect() {
        let opacityValue = 1;
        for (let a = 0; a < particlesArray.length; a++) {
            for (let b = a; b < particlesArray.length; b++) {
                let distance = Math.pow(particlesArray[a].x - particlesArray[b].x, 2) + Math.pow(particlesArray[a].y - particlesArray[b].y, 2);
                if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                    opacityValue = 1 - (distance / 20000);
                    ctx.strokeStyle = `rgba(216, 175, 83, ${opacityValue * 0.3})`;
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                    ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                    ctx.stroke();
                }
            }
        }
    }
    
    function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0, 0, innerWidth, innerHeight);
        for (let i = 0; i < particlesArray.length; i++) particlesArray[i].update();
        connect();
    }

    window.addEventListener('resize', init);
    init();
    animate();
</script>

{% endblock %}